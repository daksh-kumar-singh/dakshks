@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   ACCESSIBILITY UTILITIES
   ========================================================= */

/* Respect OS "Reduce Motion" AND runtime toggle `.no-anim` */
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}
.no-anim * {
  animation: none !important;
  transition: none !important;
  scroll-behavior: auto !important;
}

@media (prefers-reduced-motion: reduce) {
  a::after {
    transition: none !important;
  }
}

/* Visually hidden helper */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* =========================================================
   Purdue Color System â€” SOURCE OF TRUTH
   ========================================================= */

:root {
  /* =====================
     Brand Palette
     ===================== */

  --p-black: 0 0 0;              /* #000000 */
  --p-gold: 207 185 145;          /* #CFB991 Boilermaker Gold */

  --p-aged: 142 111 62;           /* #8E6F3E */
  --p-rush: 218 170 0;            /* #DAAA00 */
  --p-field: 221 185 69;          /* #DDB945 */
  --p-dust: 235 217 159;          /* #EBD99F */

  --p-steel: 85 89 96;            /* #555960 */
  --p-cool: 111 114 123;          /* #6F727B */
  --p-rail: 157 151 149;          /* #9D9795 */
  --p-steam: 196 191 192;         /* #C4BFC0 */

  /* =====================
     Semantic (LIGHT MODE)
     ===================== */

  --background: 255 255 255;
  --foreground: 0 0 0;

  --muted: var(--p-steam);
  --muted-foreground: var(--p-cool);

  --border: var(--p-rail);

  --accent: var(--p-rush);
  --accent-soft: var(--p-field);

  --link: var(--p-aged);
  --link-hover: var(--p-rush);

  /* Headings (higher contrast in light mode) */
  --heading: var(--p-aged);
}

/* =====================
   DARK MODE OVERRIDES
   ===================== */

.dark {
  --background: 0 0 0;
  --foreground: 235 235 235;

  --muted: 30 30 30;
  --muted-foreground: var(--p-steam);

  --border: var(--p-steel);

  --accent: var(--p-gold);
  --accent-soft: var(--p-dust);

  --link: var(--p-gold);
  --link-hover: var(--p-rush);

  --heading: var(--p-gold);
}

/* =========================================================
   BASE DOCUMENT STYLES
   ========================================================= */

html {
  scroll-behavior: smooth;
  overflow-x: hidden;
  overscroll-behavior-y: none;
}

body {
  background-color: rgb(var(--background));
  color: rgb(var(--foreground));
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
    "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", sans-serif;
  line-height: 1.6;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Fallback for browsers without overflow-clip */
.overflow-clip {
  overflow: clip;
}

/* =========================================================
   TYPOGRAPHY
   ========================================================= */

h1,
h2,
h3,
h4 {
  font-weight: 600;
  color: rgb(var(--heading));
}

strong {
  font-weight: 600;
  color: rgb(var(--accent));
}

.dark strong {
  color: rgb(var(--p-gold));
}

/* =========================================================
   LINKS
   ========================================================= */

a {
  color: rgb(var(--link));
  text-decoration: none;
  position: relative;
  transition: color 0.2s ease;
}

a::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 0;
  height: 2px;
  background-color: rgb(var(--link-hover));
  transition: width 0.25s ease;
}

a:hover {
  color: rgb(var(--link-hover));
}

a:hover::after {
  width: 100%;
}

/* =========================================================
   CARDS & BORDERS
   ========================================================= */

.border-brand {
  border-color: rgb(var(--border));
}

.card {
  border: 1px solid rgb(var(--border));
  border-radius: 1.25rem;
  padding: 1rem;
  background-color: rgb(var(--background));
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.card:hover {
  border-color: rgb(var(--accent));
}

/* =========================================================
   PROSE (Tailwind Typography)
   ========================================================= */

.prose {
  --tw-prose-body: rgb(var(--foreground));
  --tw-prose-headings: rgb(var(--heading));
  --tw-prose-links: rgb(var(--link));
  --tw-prose-bold: rgb(var(--foreground));
  --tw-prose-counters: rgb(var(--muted-foreground));
  --tw-prose-bullets: rgb(var(--muted-foreground));
  --tw-prose-hr: rgb(var(--border));
}

.prose a {
  text-decoration: underline;
  text-underline-offset: 4px;
}

/* =========================================================
   DETAILS / SUMMARY
   ========================================================= */

details {
  border: 1px solid rgb(var(--border));
  border-radius: 1rem;
  padding: 1rem;
  transition: border-color 0.3s ease;
}

details[open] {
  border-color: rgb(var(--accent));
}

summary {
  cursor: pointer;
  font-weight: 600;
  color: rgb(var(--accent));
}

summary:hover {
  color: rgb(var(--accent-soft));
}

summary::marker {
  display: none;
}

/* =========================================================
   REVEAL ANIMATION
   ========================================================= */

.reveal-base {
  transition: opacity 500ms ease, transform 500ms ease;
  will-change: opacity, transform;
}

.reveal-pending {
  opacity: 0;
  transform: translateY(8px);
}

.reveal-in {
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce) {
  .reveal-base {
    transition: none;
  }
  .reveal-pending,
  .reveal-in {
    opacity: 1;
    transform: none;
  }
}

/* =========================================================
   DECORATIVE EFFECTS
   ========================================================= */

@keyframes ring-pulse {
  0% { opacity: 0.25; transform: scale(0.98); }
  50% { opacity: 0.45; transform: scale(1.02); }
  100% { opacity: 0.25; transform: scale(0.98); }
}

.ring-wave {
  animation: ring-pulse 6s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .ring-wave {
    animation: none;
  }
}

/* =========================================
   Static Background Particles (No Animation)
   ========================================= */

.static-particle {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 9999px;
  opacity: 0.25;
  background-color: rgb(var(--p-rush));
  filter: blur(1px);
}

/* Individual placements */
.sp-1 {
  top: 18%;
  left: 12%;
  background-color: rgb(var(--p-rush));
}

.sp-2 {
  top: 42%;
  left: 78%;
  background-color: rgb(var(--p-aged));
}

.sp-3 {
  top: 65%;
  left: 22%;
  background-color: rgb(var(--p-steel));
}

.sp-4 {
  top: 30%;
  left: 55%;
  background-color: rgb(var(--p-field));
}

.sp-5 {
  top: 75%;
  left: 85%;
  background-color: rgb(var(--p-rail));
}

/* Dark mode tuning */
.dark .static-particle {
  opacity: 0.35;
}
